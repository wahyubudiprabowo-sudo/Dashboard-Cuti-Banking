<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Banking Verification Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  font-family:'Segoe UI', sans-serif;
  background:#f4f6f9;
  color:#333;
}
.header{
  background:linear-gradient(135deg,#1e3c72,#2a5298);
  color:white;
  padding:20px 30px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  box-shadow:0 4px 10px rgba(0,0,0,.1);
}
.header h2{margin:0;font-weight:500;font-size:20px;}
.logout{
  background:#e74c3c;
  color:white;
  border:none;
  padding:8px 16px;
  border-radius:8px;
  cursor:pointer;
}
.container{padding:25px;}
.cards{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
  gap:20px;
}
.cardBox{
  background:white;
  padding:20px;
  border-radius:14px;
  box-shadow:0 4px 15px rgba(0,0,0,.05);
  text-align:center;
}
.cardBox h3{
  margin:0;
  font-size:28px;
  color:#1e3c72;
}
.cardBox p{margin-top:8px;color:#555;font-weight:500;}
.tabs{
  margin-top:30px;
  display:flex;
  border-radius:12px;
  overflow:hidden;
}
.tabs button{
  flex:1;
  padding:12px;
  border:none;
  background:#ddd;
  font-weight:bold;
  cursor:pointer;
}
.tabs button.active{
  background:#1e3c72;
  color:white;
}
.section{
  background:white;
  margin-top:20px;
  padding:25px;
  border-radius:14px;
  box-shadow:0 4px 15px rgba(0,0,0,.05);
}
.section table{width:100%;border-collapse:collapse;}
.section td{padding:12px;border-bottom:1px solid #eee;}
.hidden{display:none;}
.footer{
  text-align:center;
  padding:20px;
  color:#777;
  font-size:13px;
}
</style>
</head>
<body>

<div class="header">
  <h2 id="userInfo"></h2>
  <button class="logout" onclick="logout()">Logout</button>
</div>

<div class="container">

<div class="cards">
  <div class="cardBox"><h3 id="annual">0</h3><p>Annual Leave</p></div>
  <div class="cardBox"><h3 id="bonus">0</h3><p>Bonus Leave</p></div>
  <div class="cardBox"><h3 id="taken">0</h3><p>Leave Taken</p></div>
  <div class="cardBox"><h3 id="available">0</h3><p>Available Leave</p></div>
</div>

<div class="tabs">
  <button id="tab1" class="active" onclick="showTab(1)">Annual Summary</button>
  <button id="tab2" onclick="showTab(2)">Leave Tracking</button>
</div>

<div id="content1" class="section"></div>
<div id="content2" class="section hidden">
  <h3>Monthly Leave Tracking</h3>
  <p>Tracking will be integrated with monthly sheet.</p>
</div>

</div>

<div class="footer">
  Banking Verification Â© 2026
</div>

<script>
const API="https://script.google.com/macros/s/AKfycbxhcanAcUP06XdvwJFuFioqqNF_CxICBEFMOHBLaCFDa5eVF3oiasFfK__giFWJXgMLqw/exec";
const id=sessionStorage.getItem("privyId");
if(!id) window.location.href="index.html";

fetch(API+"?mode=leave&id="+encodeURIComponent(id))
.then(r=>r.text())
.then(t=>{
  const d=JSON.parse(t);
  if(d.status!="ok"){logout();return;}

  userInfo.innerText=d.name+" ("+d.position+")";
  annual.innerText=d.annual;
  bonus.innerText=d.bonus;
  taken.innerText=d.taken;
  available.innerText=d.available;

  content1.innerHTML=`
    <h3>Annual Leave Detail</h3>
    <table>
      <tr><td>Annual Leave</td><td>${d.annual}</td></tr>
      <tr><td>Bonus Annual Leave</td><td>${d.bonus}</td></tr>
      <tr><td>Total Annual Leave</td><td>${d.total}</td></tr>
      <tr><td>Leave Taken</td><td>${d.taken}</td></tr>
      <tr><td>Year-End Leave Balance</td><td>${d.yearEnd}</td></tr>
      <tr><td><b>Available Leave</b></td><td><b>${d.available}</b></td></tr>
    </table>
  `;
});

function logout(){
  sessionStorage.clear();
  window.location.href="index.html";
}
function showTab(n){
  content1.classList.toggle("hidden",n!=1);
  content2.classList.toggle("hidden",n!=2);
  tab1.classList.toggle("active",n==1);
  tab2.classList.toggle("active",n==2);
}
</script>

</body>
</html>
