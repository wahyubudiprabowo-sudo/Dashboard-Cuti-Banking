<!DOCTYPE html>
<html>
<head>
<title>Leave Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{
  margin:0;
  background:#eef2f7;
  font-family:Segoe UI;
}
.topbar{
  background:linear-gradient(135deg,#141e30,#243b55);
  color:white;
  padding:15px 25px;
  display:flex;
  justify-content:space-between;
}
.container{
  padding:25px;
}
.card{
  background:white;
  padding:20px;
  border-radius:18px;
  box-shadow:0 10px 25px rgba(0,0,0,.1);
}
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  gap:20px;
  margin-top:20px;
}
.box{
  background:linear-gradient(135deg,#f5f7fa,#c3cfe2);
  border-radius:16px;
  padding:20px;
  text-align:center;
}
.box h3{
  font-size:14px;
  color:#333;
}
.box p{
  font-size:26px;
  font-weight:bold;
  color:#243b55;
}
.logout{
  background:#ff5b5b;
  border:none;
  color:white;
  padding:8px 14px;
  border-radius:8px;
  cursor:pointer;
}
</style>
</head>
<body>

<div class="topbar">
  <div id="user">Loading...</div>
  <button class="logout" onclick="logout()">Logout</button>
</div>

<div class="container">
  <div class="card">
    <h2>Leave Overview</h2>
    <div class="grid" id="grid"></div>
  </div>
</div>

<script>
const API="https://script.google.com/macros/s/AKfycbyHqzhqo7Rv_ORli9BhavMYENcGF2GoK-TLGf_OR5nXdpJR0fnUQH5a5QiEFFHbRW9pZg/exec";
const id=sessionStorage.getItem("privyId");
if(!id) location="index.html";

fetch(`${API}?mode=leave&id=${id}`)
.then(r=>r.json())
.then(d=>{
  document.getElementById("user").innerText=
    d.name+" | "+d.position;

  const list=[
    ["Annual Leave",d.annual],
    ["Bonus Leave",d.bonus],
    ["Total Leave",d.total],
    ["Leave Taken",d.taken],
    ["Year-End Balance",d.yearEnd],
    ["Available Leave",d.available]
  ];

  let html="";
  list.forEach(i=>{
    html+=`<div class="box">
      <h3>${i[0]}</h3>
      <p>${i[1]}</p>
    </div>`;
  });
  grid.innerHTML=html;
});

function logout(){
  sessionStorage.clear();
  location="index.html";
}
</script>

</body>
</html>

